/**
 * [Chart.PieceLabel.js]{@link https://github.com/emn178/Chart.PieceLabel.js}
 *
 * @version 0.1.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2017
 * @license MIT
 */
(function(){Chart.pluginService.register({afterDraw:function(a){if(a.options.pieceLabel){var c=a.chart.ctx,h=a.config.options,u=a.options.pieceLabel.precision||0,k=a.options.pieceLabel.fontSize||h.defaultFontSize,v=a.options.pieceLabel.fontColor||"#fff",w=a.options.pieceLabel.fontStyle||h.defaultFontStyle,x=a.options.pieceLabel.fontFamily||h.defaultFontFamily,n=a.tooltip._active&&a.tooltip._active.length;a.config.data.datasets.forEach(function(l,y){for(var p=l._meta[Object.keys(l._meta)[0]],m=0,f=
0;f<p.data.length;f++){var d=p.data[f],b=d._view;n&&d.draw();switch(a.options.pieceLabel.mode){case "value":b=l.data[f].toString();break;case "label":b=a.config.data.labels[f];break;default:b=b.circumference/h.circumference*100,b=parseFloat(b.toFixed(u)),m+=b,100<m&&(b-=m-100),b+="%"}c.save();c.beginPath();c.font=Chart.helpers.fontString(k,w,x);var g=c.measureText(b),e=d.tooltipPosition(),q=e.x-g.width/2,g=e.x+g.width/2,r=e.y-k/2,t=e.y+k/2;d.inRange(q,r)&&d.inRange(q,t)&&d.inRange(g,r)&&d.inRange(g,
t)&&(c.fillStyle=v,c.textBaseline="top",c.textAlign="center",c.fillText(b,e.x,e.y-k/2));c.restore()}});n&&a.tooltip.draw()}}})})();
